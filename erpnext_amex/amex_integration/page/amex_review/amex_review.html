<div class="amex-review-page">
	<div class="page-body">
		<!-- Filters -->
		<div class="filter-section card" style="margin-bottom: 20px; padding: 15px;">
			<div class="row">
				<div class="col-sm-2">
					<label>Batch</label>
					<select class="form-control form-control-sm" id="filter-batch">
						<option value="">All Batches</option>
					</select>
				</div>
				<div class="col-sm-2">
					<label>Card Member</label>
					<select class="form-control form-control-sm" id="filter-card-member">
						<option value="">All Card Members</option>
					</select>
				</div>
				<div class="col-sm-3">
					<label>Search Description</label>
					<input type="text" class="form-control form-control-sm" id="filter-keyword" 
					       placeholder="e.g. ShipStation, Google, etc.">
				</div>
				<div class="col-sm-2">
					<label>From Date</label>
					<input type="date" class="form-control form-control-sm" id="filter-from-date">
				</div>
				<div class="col-sm-2">
					<label>To Date</label>
					<input type="date" class="form-control form-control-sm" id="filter-to-date">
				</div>
				<div class="col-sm-1">
					<label>&nbsp;</label>
					<button class="btn btn-primary btn-sm btn-block" id="apply-filters-btn">Apply</button>
				</div>
			</div>
		</div>

		<!-- Transaction List -->
		<div class="transaction-list-section">
			<div class="row">
				<div class="col-md-9">
					<div class="card">
						<div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
							<h5 style="margin: 0;">Transactions</h5>
							<div style="text-align: right;">
								<div style="font-size: 11px; color: var(--text-muted); margin-bottom: 3px;">
									<span id="total-pending-count">0</span> Pending Transactions
								</div>
								<div style="font-size: 16px; font-weight: 700; color: var(--orange-500);">
									Total: <span id="total-pending-amount">$0.00</span>
								</div>
							</div>
						</div>
						<div class="card-body" style="max-height: 600px; overflow-y: auto;">
							<table class="table table-hover" id="transaction-table">
								<thead>
									<tr>
										<th width="5%">
											<input type="checkbox" id="select-all-transactions">
										</th>
										<th class="sortable-header" data-field="transaction_date" style="cursor: pointer;">
											Date <i class="fa fa-sort text-muted"></i>
										</th>
										<th class="sortable-header" data-field="description" style="cursor: pointer;">
											Description <i class="fa fa-sort text-muted"></i>
										</th>
										<th class="sortable-header" data-field="card_member" style="cursor: pointer;">
											Card Member <i class="fa fa-sort text-muted"></i>
										</th>
										<th class="sortable-header" data-field="amount" style="cursor: pointer;">
											Amount <i class="fa fa-sort text-muted"></i>
										</th>
										<th class="sortable-header" data-field="status" style="cursor: pointer;">
											Status <i class="fa fa-sort text-muted"></i>
										</th>
									</tr>
								</thead>
								<tbody id="transaction-list">
									<!-- Transactions will be loaded here -->
								</tbody>
							</table>
							<div id="loading-transactions" class="text-center" style="padding: 20px; display: none;">
								<i class="fa fa-spinner fa-spin fa-2x"></i>
								<p>Loading transactions...</p>
							</div>
							<div id="no-transactions" class="text-center" style="padding: 20px; display: none;">
								<p>No pending transactions found.</p>
							</div>
						</div>
					</div>
				</div>

				<div class="col-md-3">
					<!-- Bulk Classification Panel -->
					<div class="card amex-bulk-panel" id="bulk-panel" style="display: none;">
						<div class="card-header">
							<h5>Bulk Classification</h5>
						</div>
						<div class="card-body">
							<div class="alert alert-info" style="margin-bottom: 15px; padding: 10px;">
								<strong><span id="selected-count">0</span> transactions selected</strong>
							</div>
							
							<div class="form-group">
								<div id="bulk-vendor-field"></div>
							</div>

							<div class="form-group">
								<div id="bulk-expense-account-field"></div>
							</div>

							<div class="form-group">
								<div id="bulk-cost-center-field"></div>
							</div>

							<div class="form-group">
								<div id="bulk-accounting-class-field"></div>
							</div>

							<div class="form-group">
								<label>Notes</label>
								<textarea class="form-control form-control-sm" id="bulk-classification-notes" rows="2"></textarea>
							</div>

							<div class="form-group">
								<button class="btn btn-success btn-sm btn-block" id="bulk-classify-btn">
									<i class="fa fa-check"></i> Classify All Selected
								</button>
							</div>
						</div>
					</div>

					<!-- Single Transaction Classification Panel -->
					<div class="card amex-classification-panel" id="classification-panel" style="display: none;">
						<div class="card-header">
							<h5>Classify Transaction</h5>
						</div>
						<div class="card-body" style="max-height: 600px; overflow-y: auto;">
							<!-- Transaction Details -->
							<div class="transaction-details" id="transaction-details">
								<!-- Will be populated dynamically -->
							</div>

							<!-- Classification Form -->
							<div class="classification-form" id="classification-form">
								<hr>
								
								<div class="form-group">
									<div id="vendor-field"></div>
									<button class="btn btn-sm btn-outline-secondary" id="create-vendor-btn" type="button" style="margin-top: 5px;">
										<i class="fa fa-plus"></i> Create New Vendor
									</button>
								</div>

								<div class="form-group">
									<div id="expense-account-field"></div>
								</div>

								<div class="form-group">
									<label>Cost Center Allocation</label>
									<div class="btn-group btn-group-sm w-100" role="group">
										<button type="button" class="btn btn-outline-primary active" id="single-cc-btn">Single</button>
										<button type="button" class="btn btn-outline-primary" id="split-cc-btn">Split</button>
									</div>
								</div>

								<!-- Single Cost Center -->
								<div id="single-cost-center-div">
									<div class="form-group">
										<div id="cost-center-field"></div>
									</div>
									<div class="form-group">
										<div id="accounting-class-field"></div>
									</div>
								</div>

								<!-- Split Cost Centers -->
								<div id="split-cost-centers-div" style="display: none;">
									<div class="amex-split-table">
										<table class="table table-sm" id="split-table">
											<thead>
												<tr>
													<th style="width: 30%;">Cost Center</th>
													<th style="width: 30%;">Class</th>
													<th style="width: 15%;">Amount</th>
													<th style="width: 15%;">%</th>
													<th style="width: 10%;"></th>
												</tr>
											</thead>
											<tbody id="split-table-body">
												<!-- Split rows will be added here -->
											</tbody>
											<tfoot>
												<tr class="split-totals-row">
													<td colspan="2"><strong>Total</strong></td>
													<td><strong id="split-total-amount">$0.00</strong></td>
													<td><strong id="split-total-percent">0%</strong></td>
													<td></td>
												</tr>
											</tfoot>
										</table>
										<button class="btn btn-sm btn-outline-primary" id="add-split-btn" type="button">
											<i class="fa fa-plus"></i> Add Split
										</button>
										<div id="split-validation-msg" class="text-danger" style="margin-top: 10px; display: none;"></div>
									</div>
								</div>

								<div class="form-group">
									<label>Notes</label>
									<textarea class="form-control form-control-sm" id="classification-notes" rows="2"></textarea>
								</div>

								<!-- Actions -->
								<div class="form-group">
									<button class="btn btn-success btn-sm btn-block" id="classify-btn">
										<i class="fa fa-check"></i> Classify
									</button>
									<button class="btn btn-primary btn-sm btn-block" id="approve-btn" style="display: none;">
										<i class="fa fa-thumbs-up"></i> Approve
									</button>
									<button class="btn btn-primary btn-sm btn-block" id="post-btn" style="display: none;">
										<i class="fa fa-paper-plane"></i> Post to Journal Entry
									</button>
								</div>

								<div class="form-group">
									<button class="btn btn-warning btn-sm btn-block" id="mark-duplicate-btn">
										Mark as Duplicate
									</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Vendor Creation Modal -->
<div class="modal fade" id="vendor-modal" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Create New Vendor</h5>
				<button type="button" class="close" data-dismiss="modal">&times;</button>
			</div>
			<div class="modal-body">
				<div class="form-group">
					<label>Vendor Name *</label>
					<input type="text" class="form-control" id="new-vendor-name" required>
				</div>
				<div class="form-group">
					<label>Supplier Group</label>
					<input type="text" class="form-control" id="new-vendor-group" value="All Supplier Groups">
				</div>
				<div class="form-group">
					<label>Country</label>
					<input type="text" class="form-control" id="new-vendor-country" value="United States">
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" id="save-vendor-btn">Create Vendor</button>
			</div>
		</div>
	</div>
</div>


